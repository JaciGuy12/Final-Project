@page "{id:int}"
@model JacisCrochetCreations.Pages.Products.DetailsModel

<h2 class="text-pink fw-bold mb-4">@Model.Product.Name</h2>

<div class="row">
    <div class="col-md-6">
        <img src="@Model.Product.ImageUrl" alt="@Model.Product.Name" class="img-fluid rounded shadow" />
    </div>

    <div class="col-md-6">
        <h4 class="text-pink">@Model.Product.Category</h4>

        <p><strong>Price:</strong> $@Model.Product.Price</p>
        <p>@Model.Product.Description</p>

        <p>
            <strong>Stock:</strong>
            @if (Model.Product.Stock > 0)
            {
                <span>@Model.Product.Stock available</span>
            }
            else
            {
                <span class="text-danger">Out of Stock</span>
            }
        </p>

        <div class="d-flex gap-2 mt-3">
            <a asp-page="/Products/Edit" asp-route-id="@Model.Product.ProductId" class="btn btn-pink">Edit</a>
            <a asp-page="/Products/Delete" asp-route-id="@Model.Product.ProductId" class="btn btn-pink-dark">Delete</a>
            <a asp-page="/Products/Index" class="btn btn-secondary">Back</a>
        </div>
    </div>
</div>

<hr />

<h3 class="text-pink mt-4">Customer Reviews</h3>

@if (Model.Product.Reviews == null || !Model.Product.Reviews.Any())
{
    <p class="text-muted">No reviews yet — be the first!</p>
}
else
{
    foreach (var review in Model.Product.Reviews.OrderByDescending(r => r.PostedOn))
    {
        <div class="card shadow-sm p-3 my-3">

            <h5 class="fw-bold">@review.Name</h5>

            <p class="text-warning">
                Rating:
                @for (int i = 0; i < review.Rating; i++)
                {
                    @:★
                }
            </p>

            <p>@review.Content</p>

            <small class="text-muted">
                @review.PostedOn.ToString("MMM dd, yyyy")
            </small>
        </div>
    }
}

<a asp-page="/Reviews/AddReview" 
   asp-route-productId="@Model.Product.ProductId"
   class="btn btn-pink mt-3">
    Leave a Review
</a>







